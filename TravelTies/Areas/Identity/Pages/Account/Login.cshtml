@page
@model LoginModel
@{
    ViewData["Title"] = "Login";
}

<div class="min-h-screen flex items-center justify-center bg-gray-100 m-6">
    <div class="bg-white w-full max-w-md rounded-2xl shadow-lg p-6">
        <!-- Header -->
        <div class="flex items-center space-x-2 mb-4">
            <div>
                <h2 class="text-lg text-gray-700 font-semibold">
                    Đăng nhập
                </h2>
                <p class="text-sm text-gray-700">
                    Đăng nhập vào tài khoản Travel Ties của bạn hoặc tạo tài khoản mới
                </p>
            </div>
        </div>

        <!-- Social Login -->
        <form id="external-account" asp-page="./ExternalLogin" asp-route-returnUrl="@Model.ReturnUrl" method="post">
            <div class="space-y-2 mb-4">
            @foreach (var provider in Model.ExternalLogins!)
            {
                <button type="submit" name="provider" 
                        class="btn w-full border border-gray-300 bg-white hover:bg-gray-50 text-gray-900"
                        title="Log in using your @provider.DisplayName account">
                    <i class="fas fa-envelope mr-2"></i> Tiếp tục với @provider.DisplayName
                </button>
            }
            </div>
        </form>

        <!-- Divider -->
        <div class="flex items-center my-4">
            <div class="flex-grow border-t"></div>
            <span class="px-2 text-xs text-gray-400">HOẶC ĐĂNG NHẬP VỚI EMAIL</span>
            <div class="flex-grow border-t"></div>
        </div>

        <!-- Login Form -->
        <form method="post" class="space-y-4">
            <div asp-validation-summary="ModelOnly" class="text-red-500 text-sm"></div>

            <!-- Email -->
            <div>
                <label asp-for="Input.Email" class="block text-gray-700 text-sm font-medium mb-1">Email</label>
                <input asp-for="Input.Email" type="email" placeholder="user@example.com"
                       class="input input-bordered bg-white text-black w-full" />
                <span asp-validation-for="Input.Email" class="text-red-500 text-sm"></span>
            </div>

            <!-- Password -->
            <div>
                <label asp-for="Input.Password" class="block text-gray-700 text-sm font-medium mb-1">Mật khẩu</label>
                <input asp-for="Input.Password" type="password" placeholder="123456"
                       class="input input-bordered bg-white text-black w-full" />
                <span asp-validation-for="Input.Password" class="text-red-500 text-sm"></span>
            </div>

            <!-- Forgot password -->
            <div class="text-right">
                <a id="forgot-password" asp-page="./ForgotPassword" 
                   class="text-sm text-blue-600 hover:underline">
                    Quên mật khẩu?
                </a>
            </div>

            <!-- Submit -->
            <button type="submit" class="btn btn-primary w-full">Đăng nhập</button>
        </form>

        <!-- Register link -->
        <p class="mt-4 text-center text-sm text-gray-700">
            Không có tài khoản?
            <a asp-page="./Register" asp-route-returnUrl="@Model.ReturnUrl" 
               class="text-blue-600 hover:underline">
                Đăng ký ở đây
            </a>
        </p>
    </div>
</div>

@section Scripts {
    @await Html.PartialAsync("CustomComponents/_LoadingModal", "loginForm")
    <partial name="_ValidationScriptsPartial" />
}

@page
@model RegisterModel
@{
    ViewData["Title"] = "Register";
}

<div class="min-h-screen flex items-center justify-center bg-gray-100 m-6">
    @*TODO: HOW???<!-- Background image covering the entire section -->
    <img src="@Url.Content("~/images/banahill.png")"
         alt="Background image"
         class="absolute inset-0 w-full h-full object-cover brightness-50 -z-10"/>*@

    <div class="bg-white w-full max-w-md rounded-2xl shadow-lg p-6">
        <!-- Header -->
        <div class="flex items-center space-x-2 mb-4">
            <div>
                <h2 class="text-lg text-gray-700 font-semibold">
                    Đăng ký tài khoản
                </h2>
                <p class="text-sm text-gray-700">
                    Tạo tài khoản Travel Ties mới để trải nghiệm đầy đủ dịch vụ
                </p>
            </div>
        </div>

        <!-- Social Register (optional) -->
        <form id="external-account" asp-page="./ExternalLogin" asp-route-returnUrl="@Model.ReturnUrl" method="post">
            <div class="space-y-2 mb-4">
                @foreach (var provider in Model.ExternalLogins!)
                {
                    <button type="submit" name="provider"
                            class="btn w-full border border-gray-300 bg-white hover:bg-gray-50 text-gray-900"
                            title="Register using your @provider.DisplayName account">
                        <i class="fas fa-envelope mr-2"></i> Tiếp tục với @provider.DisplayName
                    </button>
                }
            </div>
        </form>

        <!-- Divider -->
        <div class="flex items-center my-4">
            <div class="flex-grow border-t"></div>
            <span class="px-2 text-xs text-gray-400">HOẶC ĐĂNG KÝ BẰNG EMAIL</span>
            <div class="flex-grow border-t"></div>
        </div>

        <!-- Register Form -->
        <form method="post" class="space-y-4">
            <div asp-validation-summary="ModelOnly" class="text-red-500 text-sm"></div>

            <!-- Email -->
            <div>
                <label asp-for="Input.Email" class="block text-gray-700 text-sm font-medium mb-1">Email</label>
                <input asp-for="Input.Email" type="email" placeholder="user@example.com"
                       class="input input-bordered bg-white text-black w-full"/>
                <span asp-validation-for="Input.Email" class="text-red-500 text-sm"></span>
            </div>

            <!-- Username -->
            <div>
                <label asp-for="Input.UserName" class="block text-gray-700 text-sm font-medium mb-1">Tên tài khoản</label>
                <input asp-for="Input.UserName" placeholder="Tên tài khoản"
                       class="input input-bordered bg-white text-black w-full"/>
                <span asp-validation-for="Input.UserName" class="text-red-500 text-sm"></span>
            </div>

            <!-- Password -->
            <div>
                <label asp-for="Input.Password" class="block text-gray-700 text-sm font-medium mb-1">Mật khẩu</label>
                <input asp-for="Input.Password" type="password" placeholder="123456"
                       class="input input-bordered bg-white text-black w-full"/>
                <span asp-validation-for="Input.Password" class="text-red-500 text-sm"></span>
            </div>

            <!-- Confirm Password -->
            <div>
                <label asp-for="Input.ConfirmPassword" class="block text-gray-700 text-sm font-medium mb-1">Xác nhận mật khẩu</label>
                <input asp-for="Input.ConfirmPassword" type="password" placeholder="123456"
                       class="input input-bordered bg-white text-black w-full"/>
                <span asp-validation-for="Input.ConfirmPassword" class="text-red-500 text-sm"></span>
            </div>

            <!-- Date of Birth -->
            <div>
                <label asp-for="Input.UserDOB" class="block text-gray-700 text-sm font-medium mb-1">Ngày sinh</label>
                <input asp-for="Input.UserDOB" type="date"
                       class="input input-bordered bg-white text-black w-full"/>
                <span asp-validation-for="Input.UserDOB" class="text-red-500 text-sm"></span>
            </div>
            
            <div>
                <label class="block text-gray-700 text-sm font-medium mb-1">Giới tính</label>
                <div class="flex items-center space-x-6">
                    <label class="flex items-center space-x-2">
                        <input type="radio" asp-for="Input.Gender" value="true" class="radio radio-primary" />
                        <span>Nam</span>
                    </label>
                    <label class="flex items-center space-x-2">
                        <input type="radio" asp-for="Input.Gender" value="false" class="radio radio-primary" />
                        <span>Nữ</span>
                    </label>
                </div>
                <span asp-validation-for="Input.Gender" class="text-red-500 text-sm"></span>
            </div>

            <!-- Submit -->
            <button type="submit" class="btn btn-primary w-full">Đăng ký</button>
        </form>

        <!-- Login link -->
        <p class="mt-4 text-center text-sm text-gray-700">
            Đã có tài khoản?
            <a asp-page="./Login" asp-route-returnUrl="@Model.ReturnUrl"
               class="text-blue-600 hover:underline">
                Đăng nhập ở đây
            </a>
        </p>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}

@model IEnumerable<TravelTies.Areas.Customer.Models.FeaturedTourViewModel>

<section class="py-16 px-4 bg-muted/30">
    <div class="container mx-auto">
        <div class="text-center mb-12">
            <h2 class="text-3xl md:text-4xl font-bold mb-4 text-black">Tours nổi bật</h2>
            <p class="text-lg text-muted-foreground max-w-2xl mx-auto text-gray-700">
                Những tour được đánh giá cao nhất bởi cộng đồng du lịch Travel Ties
            </p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
            @foreach (var tour in Model)
            {
                var daysUntil = (tour.NextDeparture.ToDateTime(TimeOnly.MinValue) - DateTime.Today).Days;
                <div class="card cursor-pointer hover:shadow-lg transition-shadow flex flex-col h-full">
                    <img src=@Url.Content(tour.Picture) alt="@tour.TourName" class="w-full h-48 object-cover" />
                    
                    <div class="p-4 flex-1 flex flex-col justify-between">
                        <div>
                            <div class="flex justify-between items-center mb-2">
                                <span class="badge bg-accent/20 text-green-700">@tour.Destination</span>
                                <span class="text-yellow-600 font-bold">@String.Format("{0:N1}", tour.AvgRating)★ (@tour.ReviewsCount)</span>
                            </div>
                            <h3 class="font-semibold text-lg mb-2 text-black">@tour.TourName</h3>
                            <div class="flex justify-between text-sm text-muted-foreground mb-2">
                                <span class="text-blue-700">@tour.NextDeparture.ToString("dd/MM/yyyy")</span>
                                <span class="text-blue-700">@(daysUntil > 0 ? $"{daysUntil} ngày nữa" : "Hôm nay")</span>
                            </div>
                            <div class="flex justify-between items-center mb-2">
                                <span class="text-green-600 font-bold">@String.Format("{0:N0}đ", tour.Price)</span>
                                @if (tour.OriginalPrice > tour.Price)
                                {
                                    <span class="text-sm line-through text-muted-foreground text-gray-600">@String.Format("{0:N0}đ", tour.OriginalPrice)</span>
                                }
                            </div>
                            <div class="text-sm text-muted-foreground text-blue-500">
                                Còn @tour.AvailableSlots chỗ
                                @if (tour.AvailableSlots <= 3)
                                {
                                    <span class="badge badge-outline badge-error ml-1 text-xs text-red-500">Sắp hết chỗ</span>
                                }
                            </div>
                        </div>

                        <div class="card-actions pt-4 mt-4">
                            <a href="@Url.Action("Detail", "Tour", new { id = tour.TourId })" class="btn btn-primary bg-blue-800 w-full">Xem chi tiết</a>
                        </div>
                    </div>
                </div>
            }
        </div>


        <div class="text-center mt-12">
            <a href="@Url.Action("Index", "Tour")" class="btn btn-outline btn-md border-b-gray-400 text-black hover:bg-green-300">Xem tất cả tours</a>
        </div>
    </div>
</section>
